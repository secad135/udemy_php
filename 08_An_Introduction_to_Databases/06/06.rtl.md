# آموزش اتصال PHP به دیتابیس MySQL/MariaDB

## مقدمه

پس از ساختاردهی دیتابیس و پر کردن آن با داده‌ها، می‌توانیم از PHP به آن دسترسی پیدا کنیم. ابتدا باید به دیتابیس متصل شویم.

* سرور دیتابیس مانند MySQL یا MariaDB به صورت جداگانه از وب‌سرور اجرا می‌شود.
* می‌تواند روی همان کامپیوتر محلی (مثل XAMPP) یا روی سرور دیگری باشد.
* در هنگام انتقال وب‌سایت به سرور تولیدی، وب‌سرور و سرور دیتابیس معمولاً روی کامپیوترهای مختلف هستند.

## اطلاعات مورد نیاز برای اتصال

برای اتصال به دیتابیس از PHP به ۴ مورد نیاز داریم:

1. آدرس سرور دیتابیس (Host)
2. نام دیتابیس
3. نام کاربری (Username)
4. رمز عبور (Password)

> این اطلاعات هنگام ایجاد دیتابیس در phpMyAdmin ساخته شده‌اند.

## اتصال به دیتابیس با MySQLi

برای اتصال به MySQL یا MariaDB از PHP، از تابع `mysqli_connect` استفاده می‌کنیم.
این تابع بخشی از MySQL Improved Extension است و به صورت پیش‌فرض در PHP موجود است.
با اینکه نام آن MySQL است، به خوبی با MariaDB نیز کار می‌کند.

### مثال کد اتصال

```php
<?php
$db_host = "your-db-host";
$db_name = "your-db-name";
$db_user = "your-db-user";
$db_pass = "your-db-password";

$conn = mysqli_connect($db_host, $db_user, $db_pass, $db_name);

if (mysqli_connect_error()) {
    echo mysqli_connect_error();
    exit;
}

echo "Connected successfully.";
```

### توضیح کد

1. تعریف چهار متغیر شامل اطلاعات اتصال.
2. فراخوانی `mysqli_connect` برای ایجاد اتصال و دریافت یک متغیر که نمایانگر اتصال است.
3. بررسی خطای اتصال با `mysqli_connect_error`:

   * اگر رشته غیرخالی باشد، به معنی خطاست و پیغام خطا چاپ می‌شود.
   * اگر `null` باشد، اتصال موفقیت‌آمیز است.
4. استفاده از `exit` در صورت خطا تا از اجرای ادامه اسکریپت جلوگیری شود.
5. چاپ پیغام موفقیت در صورت اتصال درست.

### نکات مهم

* تابع مذکور می‌تواند به صورت **Procedural** یا **Object-Oriented** استفاده شود. در این جزوه روش Procedural توضیح داده شده است.
* اگر اطلاعات اتصال نادرست باشد، مرورگر پیام خطای اتصال را نمایش می‌دهد.
* این اسکریپت می‌تواند به عنوان ابزاری مستقل برای بررسی اطلاعات اتصال به کار رود.

## منابع مفید

* [PHP mysqli_connect](https://www.php.net/manual/en/function.mysqli-connect.php)
* [PHP MySQLi Extension](https://www.php.net/manual/en/book.mysqli.php)
* [PHP mysqli_connect_error](https://www.php.net/manual/en/mysqli.connect-error.php)
